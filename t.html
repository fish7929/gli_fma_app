<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TextDrawer</title>
    <script src="js/lib/canvastext/CanvasText-0.4.1.js"></script>
    <script>
        // Definition of global vars
        var Canvas,Context;
        // Creation of the new CanvasText instance.
        var CT = new CanvasText;

        // Our canvas element must be loaded before the usage of CanvasText.
        window.onload = initCanvasText;

        function initCanvasText()
        {
            Canvas = document.getElementById("canvas");
            Context = Canvas.getContext("2d");

            // Once window is loaded we set the configuration and the default styles.
            CT.config({
                canvas: Canvas,
                context: Context,
                fontFamily: "Verdana",
                fontSize: "12px",
                fontWeight: "normal",
                fontColor: "#000",
                lineHeight: "8",
                letterSpacing : 2
            });
            /*
             * Definition of some style classes.
             */
            CT.defineClass("blue",{
                fontSize: "22px",
                fontColor: "#29a1f1",
                fontFamily: "Impact",
                fontWeight: "normal",
                textShadow: "2px 2px 2px #919191"
            });

            CT.defineClass("pink",{
                fontSize: "22px",
                fontColor: "#ff5e99",
                fontFamily: "Times new roman",
                fontWeight: "bold",
                fontStyle: "italic"
            });

            // The text we want to draw.
//            var text = '土 <class="blue">的发</class> or <class="pink">的发发非非土</class>.\n\
//                I just care about the new and <class="blue">exciting</class> <class="pink">automatic</class>\n\
//                <class="blue">的发发非非土</class> feature!! <br />Just to be sure:<br />Lorem ipsum dolor sit amet, \n\
//                c的发发非非土ulla.\n\
//                Vestibulum <class="pink">eget</class> mi quis sapien lacinia porta eget eget neque. Aliquam lacus \n\
//                leo, sodales sit amet laoreet non, mollis ut nibh.';

            var text = "tttt\nffff";

//            text = "ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";

            // Draw it!
            var img = CT.drawText({
                text:text,
                x: 0,
                y: 20,
                returnImage : true
            });

            Context.strokeStyle = "#000";
            Context.lineWidth = 1;
//            console.log(CT.maxWidth)
            Context.strokeRect(0.5,0.5,CT.maxWidth,CT.maxHeight);

            Context.drawImage(img,0,0)

//            console.log(img.width,img.height)
        }


    </script>
</head>
<body>
<canvas id="canvas" width="900" height="320" style="border:1px solid #000;">
    <p>Explorador no compatible</p>
</canvas>
</body>
</html>